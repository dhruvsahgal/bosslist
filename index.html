<!doctype html>
<html>
 <head>
 <title>Bosslist</title>

	 <meta charset="utf-8" />
	 <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
	 <meta name="viewport" content="width=device-width, initial-scale=1" />
	 <link rel="stylesheet" href="css/foundation.css" />
	 <link rel="stylesheet" href="css/app.css">
	 <link rel="stylesheet" href="css/font-awesome.min.css">
	 <script src="js/vendor/modernizr.js"></script>
	 <script src="js/vendor/jquery.js"></script>
	 <script src="js/vendor/fastclick.js"></script>
	 <script src="js/foundation.min.js"></script>


 </head>

	<body>
		<!-- Nav bar -->
		<div class="contain-to-grid ">
		<nav class="top-bar" data-topbar role="navigation">
    		<ul class="title-area">
    			<li class="name">
     				<h1><a href="#">Bosslist</a></h1>
    			</li>
       				 
 			 </ul>

			<!-- Right Nav Section -->
			<section class="top-bar-section">
			    <ul class="right">
			    	<li class="has-dropdown">
			        	<a href="#"><img src="img/settings_small2.png"></a>
			        	<ul class="dropdown">
			          		<li><a href="#">Change Settings</a></li>
			        	</ul>
			      	</li>
			    </ul> 
			
			    <ul class="right">
			    	
					
			    	<li>
			    		<a id="timeRemaining" >Remaining Time: 00:00 </a>
			    	</li>
			    	
			    </ul>
			    <ul class="right">
			    	<li>
			    		<a id="totalTask" class="hello" >Total Tasks: 0 </a>
			    	</li>
			    </ul>
			    <ul class="right">
			    	<li>
			    		<a id="taskTimeTotal">Total Task Time (mins): 00:00</a>
					</li>
			    </ul>
		    </section>
		</nav>
		</div>
		<br>
		<!-- Timer Setup -->
		<div class ="row small-16">

			<strong>Timer:</strong>
			<button onclick = "myTimer()">Start Timer</button> 
			<button onclick = "stopTimer()" >Stop Timer</button>

			<Strong>Focused Time: <span id= "time"> 25:00</span></strong>
			<br>
			<button onclick="reset()">Reset Button</button>

		</div>

        <!--Column setup -->
		<div class="row" >
 			<div class="medium-4 columns lines"><strong>Most Important Tasks</strong></div>
		  	<div class="medium-4 columns lines"><strong>High Priority</strong></div>
		 	<div class="medium-4 columns lines"><strong>Low Priority</strong></div>
		  	
		  	
		<!--Times -->	  		
		<div class="row">
 			<div class="medium-4 columns ">
 				<p>Total time: (mins)</p>
 				<div id="taskMostTime" >0:00</div>
 			</div>
		  	<div class="medium-4 columns ">
		  		<p>Total time: (mins)</p>
		  		<p id="taskHighTime">0:00</p>
		  	</div>
		 	<div class="medium-4 columns ">
		 		<p>Total time: (mins)</p>
		 		<p id="taskLowTime">0:00</p>
		 	</div>
		  	<div class="medium-4 columns ">
		  		
	  		</div>

	  	<!--Task Lists -->
		<div class="row">
            <!--Modal for MIT along with Task Input -->
            <div class="medium-4 columns ">   
			  	<ul> 
			  	<a href="#" data-reveal-id="taskModalMost" class="radius button">+</a>

                <div id="taskModalMost" class="reveal-modal"  data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
                    <h2 id="modalTitle">Add a Task</h2>
                    <input  type = "text" id="taskMostName" placeholder = "Write your task here" onkeydown="if (event.keyCode == 13)  taskModal('taskMost')"/> 
                    <input type="text" id="incrementValMost"  placeholder="How long for this task?" onkeydown="if (event.keyCode == 13)  taskModal('taskMost')"/>
                    <a class="close-reveal-modal" aria-label="Close">&#215;</a>
                </div>
			  					  		
				</ul>
				<ul>
					<p id="taskMost" value="" > </p>
				</ul>
			</div>
			<!--Modal for High Priority along with Task Input -->
			<div class="medium-4 columns ">
			  	<ul> 
			  	<a href="#" data-reveal-id="taskModalHigh" class="radius button">+</a>

                <div id="taskModalHigh" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
                    <h2 id="modalTitle">Add a Task</h2>
                    <input  type = "text" id="taskHighName" placeholder = "Write your task here" onkeydown="if (event.keyCode == 13)  taskModal('taskHigh')"/> 
                    <input type="text" id="incrementValHigh"  placeholder="How long for this task?" onkeydown="if (event.keyCode == 13)  taskModal('taskHigh')"/>
                    <a class="close-reveal-modal" aria-label="Close">&#215;</a>
                </div>
			  		
				</ul>
				<ul>
					<p id="taskHigh" value=""> </p>
				</ul>
			</div>
			<div class="medium-4 columns " >
            <!--Modal for Low Priority along with Task Input -->

			  	<ul> 
			  	<a href="#" data-reveal-id="taskModalLow" class="radius button">+</a>

                <div id="taskModalLow" class="reveal-modal"  data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
                    <h2 id="modalTitle">Add a Task</h2>
                    <input  type = "text" id="taskLowName" placeholder = "Write your task here" onkeydown="if (event.keyCode == 13)  taskModal('taskLow')"/> 
                    <input type="text" id="incrementValLow"  placeholder="How long for this task?" onkeydown="if (event.keyCode == 13)  taskModal('taskLow')"/>
                    <a class="close-reveal-modal" aria-label="Close">&#215;</a>
                </div>
			  		 
				</ul>
				<ul>
					<p id="taskLow" value=""> </p>
				</ul>
			</div>
			
		</div>
		</div>
		
		<!-- Adding Tasks -->
        <script > 
        $(document).foundation();
		var count = 0;
		var total = [0, 0, 0];
		var seconds = 1500; // For Pomodoro timer. 1500 seconds = 25 mins.
		var countdown;
        var times=[];
        var column;
        var totalTime=0;
		var timerCheck = 0;
		var pomodoriMax = 4;
		var breakTime = 5;
		var breakTimeMax = 30;
        
			
		//Adding tasks and counting up the total time
	 	function addTaskFunction(taskId){
 	 		var nameAdder = "Name";
 	 		var timeAdder = "Time";
            var timeIncrement = "incrementVal"+taskId.substring(4);
                if (taskId === "taskMost"){
                    var column = 0;
                }
                else if (taskId === "taskHigh"){
                    var column = 1;    
                }
                else {
                    var column = 2;
                }
 	 	    console.log(timeIncrement);   
			var text = parseInt(document.getElementById(timeIncrement).value); //this converts the variable in to a number so the proper addtion can happen
 	 		var newTask= document.getElementById(taskId + nameAdder).value;
            console.log(taskId);
//            console.log(newTask);
//            console.log(text);
            
				
 	 		newTask=document.getElementById(taskId + nameAdder).value;
			if (newTask.length==0){
				newTask="Blank Task";
				}	 			
			document.getElementById(taskId).innerHTML+= '<br/>' +  newTask;
			document.getElementById(taskId+nameAdder).value="";
			count = count +1;
            total[column] = text + total[column];
			times[column] = total[column];  //this converts the variable in to a number so the proper addtion can happen
			document.getElementById(taskId+timeAdder).innerHTML=times[column];
			document.getElementById("totalTask").innerHTML = 'Total Tasks: ' + count;
            totalTime = times.reduce(addArray, 0);
            function addArray(a,b){
            return a + b;
            }
            console.log(totalTime);
			document.getElementById("taskTimeTotal").innerHTML = 'Total Task Time (mins): ' + totalTime;
            console.log(column);
            console.log(times);
            console.log(count);
			
 	 	}

 	 	//Pomodoro timer function to start updating and checking for which Pomodori it is. 
		function myTimer(){	

			if (timerCheck === 0) {
				timerCheck = 1;

				countdown = setInterval(counter, 1000);
				console.log(pomodori.value);

				if (pomodori.value<pomodoriMax) {

					document.getElementById('pomodoriValue').innerHTML = pomodori.value;
					document.getElementById('breakValue').innerHTML = breakTime;

				}
				else{
					document.getElementById('pomodoriValue').innerHTML = 'Maxed out';
					document.getElementById('breakValue').innerHTML = breakTimeMax;
				}
			}
			else{
				console.log("timer already running!");
			}
		}
		//Pomodoro timer to stop
		function stopTimer() {

            clearInterval(countdown);
            timerCheck = 0;
           
       }

       // Acutal timer
       function counter() {
			var minutes = Math.round((seconds - 30)/60);
			var remainingSeconds = seconds % 60;
			if (remainingSeconds < 10) {
    			remainingSeconds = "0" + remainingSeconds;  
			}
			document.getElementById('time').innerHTML = minutes + ":" + remainingSeconds;
			document.getElementById('timeRemaining').innerHTML = "Remaining Time: " +minutes + ":" + remainingSeconds;
			if (seconds === 0) {
   			clearInterval(countdown);
   			} else {
   				seconds--;
				}
		}

		function reset(){
			location.reload();
		}
            
        function taskModal(taskType){
            var modalName = "taskModal";
            var modalType = "#" + modalName + taskType.substring(4) ;
            addTaskFunction(taskType);
            $(modalType).foundation('reveal', 'close');
//            console.log(modalType);
            
        }
        </script>

	
		

	</body>

</html>